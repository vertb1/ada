local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Utility functions
local Utility = {
    getCharacter = function(player)
        local character = player.Character
        if not character then return end
        
        local humanoid = character:FindFirstChild("Humanoid")
        if not humanoid then return end
        
        return character, humanoid.MaxHealth, (humanoid.Health/humanoid.MaxHealth) * 100, humanoid.Health, character:FindFirstChild("HumanoidRootPart")
    end,
    
    getRootPart = function(player)
        return player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    end,
    
    isTeamMate = function(player)
        return player.Team and player.Team == LocalPlayer.Team
    end
}

-- Settings
local Settings = {
    showTeam = false,
    allyColor = Color3.fromRGB(0, 255, 0),
    enemyColor = Color3.fromRGB(255, 0, 0),
    maxEspDistance = 1000,
    toggleBoxes = true,
    toggleTracers = true,
    unlockTracers = false,
    showHealthBar = true,
    proximityArrows = true,
    maxProximityArrowDistance = 100,
    proximityArrowsSize = 20,
    textSize = 13
}

local EntityESP = {}
EntityESP.__index = EntityESP

local worldToViewportPoint = clonefunction(Instance.new('Camera').WorldToViewportPoint)
local vectorToWorldSpace = CFrame.new().VectorToWorldSpace
local getMouseLocation = clonefunction(UserInputService.GetMouseLocation)

local id = HttpService:GenerateGUID(false)
local userId = "1234"

local lerp = Color3.new().lerp
local vector3New = Vector3.new
local Vector2New = Vector2.new

local mathFloor = math.floor
local mathRad = math.rad
local mathCos = math.cos
local mathSin = math.sin
local mathAtan2 = math.atan2

local ESP_RED_COLOR = Color3.fromRGB(192, 57, 43)
local ESP_GREEN_COLOR = Color3.fromRGB(39, 174, 96)
local TRIANGLE_ANGLE = mathRad(45)

EntityESP.id = 0

local function InitESP()
    local self = setmetatable({}, EntityESP)
    
    -- Initialize variables from Settings
    self.showTeam = Settings.showTeam
    self.allyColor = Settings.allyColor
    self.enemyColor = Settings.enemyColor
    self.maxEspDistance = Settings.maxEspDistance
    self.toggleBoxes = Settings.toggleBoxes
    self.toggleTracers = Settings.toggleTracers
    self.unlockTracers = Settings.unlockTracers
    self.showHealthBar = Settings.showHealthBar
    self.proximityArrows = Settings.proximityArrows
    self.maxProximityArrowDistance = Settings.maxProximityArrowDistance
    
    -- Your existinglocal RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Utility functions
local Utility = {
    getCharacter = function(player)
        local character = player.Character
        if not character then return end
        
        local humanoid = character:FindFirstChild("Humanoid")
        if not humanoid then return end
        
        return character, humanoid.MaxHealth, (humanoid.Health/humanoid.MaxHealth) * 100, humanoid.Health, character:FindFirstChild("HumanoidRootPart")
    end,
    
    getRootPart = function(player)
        return player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    end,
    
    isTeamMate = function(player)
        return player.Team and player.Team == LocalPlayer.Team
    end
}

-- Settings
local Settings = {
    showTeam = false,
    allyColor = Color3.fromRGB(0, 255, 0),
    enemyColor = Color3.fromRGB(255, 0, 0),
    maxEspDistance = 1000,
    toggleBoxes = true,
    toggleTracers = true,
    unlockTracers = false,
    showHealthBar = true,
    proximityArrows = true,
    maxProximityArrowDistance = 100,
    proximityArrowsSize = 20,
    textSize = 13
}

local EntityESP = {}
EntityESP.__index = EntityESP

local worldToViewportPoint = clonefunction(Instance.new('Camera').WorldToViewportPoint)
local vectorToWorldSpace = CFrame.new().VectorToWorldSpace
local getMouseLocation = clonefunction(UserInputService.GetMouseLocation)

local id = HttpService:GenerateGUID(false)
local userId = "1234"

local lerp = Color3.new().lerp
local vector3New = Vector3.new
local Vector2New = Vector2.new

local mathFloor = math.floor
local mathRad = math.rad
local mathCos = math.cos
local mathSin = math.sin
local mathAtan2 = math.atan2

local ESP_RED_COLOR = Color3.fromRGB(192, 57, 43)
local ESP_GREEN_COLOR = Color3.fromRGB(39, 174, 96)
local TRIANGLE_ANGLE = mathRad(45)

EntityESP.id = 0

local function InitESP()
    local self = setmetatable({}, EntityESP)
    
    -- Initialize variables from Settings
    self.showTeam = Settings.showTeam
    self.allyColor = Settings.allyColor
    self.enemyColor = Settings.enemyColor
    self.maxEspDistance = Settings.maxEspDistance
    self.toggleBoxes = Settings.toggleBoxes
    self.toggleTracers = Settings.toggleTracers
    self.unlockTracers = Settings.unlockTracers
    self.showHealthBar = Settings.showHealthBar
    self.proximityArrows = Settings.proximityArrows
    self.maxProximityArrowDistance = Settings.maxProximityArrowDistance
    
    -- Your existing
